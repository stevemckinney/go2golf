jQuery(document).ready(function($){function t(t){var e=parseFloat(t),a=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return a?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0}function e(){$(".rwp-slider-std").each(function(t){$(this).noUiSlider({step:1,start:$(this).data("val"),connect:"lower",range:{min:$(this).data("min"),max:$(this).data("max")},format:wNumb({decimals:0})}),$(this).Link("lower").to($(this).parent().find("input"),null,wNumb({decimals:0}))})}function a(){$(".rwp-slider-limits").each(function(t){var e=$(this).data("min"),a=$(this).data("max");a="inf"==a?1e4:a,$(this).noUiSlider({connect:!0,step:10,start:[e,a],range:{min:[0],"90%":5e3,max:1e4},format:wNumb({decimals:0})}),$(this).Link("lower").to($(this).parent().find("input.rwp-min"),null,wNumb({decimals:0})),$(this).Link("upper").to($(this).parent().find("input.rwp-max"),null,wNumb({decimals:0})),$(this).on({slide:function(){var t=$(this).val()[0],e=$(this).val()[1];e>5e3&&$(this).parent().find("input.rwp-max").val("no-limit")}}),a>5e3&&$(this).parent().find("input.rwp-max").val("no-limit")})}function r(t){var e=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return e.test(t)}function n(t){$(".rwp-t-scores-"+t).first().show(),$(".rwp-t-custom-tabs-"+t).first().show()}function i(t){$("#rwp-reviews-meta-box .rwp-tabs-wrap").children("li").each(function(t){$(this).removeClass("rwp-tabs")}),$("#rwp-review-tab-"+t).addClass("rwp-tabs"),$("#rwp-reviews-wrap").children(".rwp-review-form").each(function(t){$(this).hide()}),$("#rwp-review-"+t).show()}function p(e){var a="undefined"!=typeof rwpPreferences.preferences_step?parseFloat(rwpPreferences.preferences_step):.5,r=t(a),n=null==e?".rwp-slider":"#rwp-review-"+e+" .rwp-slider";$(n).each(function(t){$(this).noUiSlider({step:a,start:$(this).data("val"),connect:"lower",range:{min:$(this).data("min"),max:$(this).data("max")},format:wNumb({decimals:r})}),$(this).Link("lower").to($(this).parent().find("input"),null,wNumb({decimals:r}))})}function s(t){$(".rwp-t-reviews-"+t).first().show()}function o(t){$("#rwp-tables-meta-box .rwp-tabs-wrap").children("li").each(function(t){$(this).removeClass("rwp-tabs")}),$("#rwp-table-tab-"+t).addClass("rwp-tabs"),$("#rwp-tables-wrap").children(".rwp-table-form").each(function(t){$(this).hide()}),$("#rwp-table-"+t).show()}function l(e){var a="undefined"!=typeof rwpPreferences.preferences_step?parseFloat(rwpPreferences.preferences_step):.5,r=t(a),n=$(e).find(".rwp-slider");$(n).each(function(t){$(this).noUiSlider({step:a,start:$(this).data("val"),connect:"lower",range:{min:$(this).data("min"),max:$(this).data("max")},format:wNumb({decimals:r})}),$(this).Link("lower").to($(this).parent().find("input"),null,wNumb({decimals:r}))})}var d=document.getElementById("rwp-codemirror");if(null!==d)var c=CodeMirror.fromTextArea(d,{lineNumbers:!0,lineWrapping:!0,theme:"neo",value:d.value,indentUnit:4,indentWithTabs:!0});if($("#rwp-add-criteria-btn").click(function(t){t.preventDefault();var e=$("#rwp-criterias"),a=e.data("placeholder"),r=e.data("remove-label"),n=e.find("li").length,i='<li><span class="dashicons dashicons-menu"></span><input type="text" name="rwp_templates[template_criterias]['+n+']" value="" placeholder="'+a+'" /> <a class="rwp-remove-criteria-btn" href="#">'+r+"</a></li>";$("#rwp-criterias").append(i)}),$(".wrap").on("click",".rwp-remove-criteria-btn",function(t){t.preventDefault(),$(this).parent().remove()}),$("#rwp-add-custom-tab-btn").click(function(t){t.preventDefault();var e=$("#rwp-custom-tabs"),a=e.find("li").last(),r=e.data("ajax"),n=0;0!=a.length&&(n=parseInt(a.data("i"))+1),console.log(a);var i="";i+='<li data-i="'+n+'">',$.each(r.formFields,function(t,e){var a=a="tab_color"==e?'class="rwp-color-picker"':"";i+="<span>",i+="<label>"+r.options[e].label+"</label>",i+='<input type="text" name="'+r.optionName+"["+r.fieldId+"]["+n+"]["+e+']" value="" placeholder="'+r.options[e]["default"]+'" '+a+" />",i+="</span>"}),i+='<span><a class="rwp-remove-tab-btn" href="#">'+r.removeLabel+"</a></span>",i+="</li>",e.append(i),$(".rwp-color-picker").wpColorPicker()}),$(".wrap").on("click",".rwp-remove-tab-btn",function(t){t.preventDefault(),$(this).parent().parent().remove()}),$(".rwp-color-picker").wpColorPicker(),$("#rwp-criterias").sortable(),$(".wrap").on("change",".rwp-exclude-terms input",function(t){t.preventDefault();var e=$(this).closest("ul"),a=e.find("input").length,r=e.find("input:checked").length,n=e.parent().find(".rwp-terms-msg"),i=e.data("msg");n.html(""),a==r&&($(this).attr("checked",!1),n.html(i))}),null!=$("#rwp-pref-form")&&(a(),e()),$("#rwp-notification-btn").click(function(t){t.preventDefault();var e=$.trim($(this).parent().find("input[type=text]").val());if(0==e.length||!r(e))return alert("Insert a valid email address"),!1;var a=$(this).parent().find(".rwp-loader"),n={action:demoNotificationDataObj.action,security:demoNotificationDataObj.ajax_nonce,email:e};a.fadeIn("fast"),$.post(demoNotificationDataObj.ajax_url,n,function(t){a.fadeOut("fast"),alert(t.data.msg)},"json").fail(function(){a.fadeOut("fast"),alert("Error sending email. Retry or contact the plugin support team. Thank You.")})}),null!=$("#rwp-reviews-meta-box")&&p(null),$("#rwp-reviews-meta-box").on("change",".rwp-template-selection",function(){var t=$(this).data("review-id"),e=$(this).val();$(".rwp-t-scores-"+t).hide(),$("#rwp-template-scores-"+t+"-"+e).show(),$(".rwp-t-custom-tabs-"+t).hide(),$("#rwp-custom-tabs-"+t+"-"+e).show()}),$("#rwp-reviews-meta-box").on("click",".rwp-tabs-wrap li a",function(t){t.preventDefault();var e=$(this).data("review-id");i(e)}),$("#rwp-reviews-meta-box").on("click",".rwp-delete-review-btn",function(t){t.preventDefault();var e=$(this).data("review-id");$("#rwp-review-"+e).remove(),$("#rwp-review-tab-"+e).remove();var a=$(".rwp-review-form").last().data("review-id");i(a)}),$("#rwp-reviews-meta-box").on("click",".rwp-review-remove-image-btn",function(t){t.preventDefault();var e=$(this).data("review-id"),a=$(this).data("default");$("#rwp-review-image-img-"+e).attr("src",a),$("#rwp-review-add-image-input-"+e).val("")}),$("#rwp-add-review-form-btn").click(function(t){t.preventDefault();var e=0,a=$("#rwp-reviews-meta-box .rwp-tabs-wrap").data("placehoder"),r=$(".rwp-review-form").last().data("review-id"),s=$(this).parent().find(".rwp-loader"),o=$(this).parent().find("select[name=rwp-review-type]").val();null!=r&&(e=parseInt(r)+1);var l={action:reviewsMetaBoxObj.action,security:reviewsMetaBoxObj.ajax_nonce,rwp_review_id:e,rwp_review_type:o};s.fadeIn("fast"),$.post(reviewsMetaBoxObj.ajax_url,l,function(t){$("#rwp-reviews-wrap").append(t),$("#rwp-reviews-meta-box .rwp-tabs-wrap").append('<li class="rwp-tabs" id="rwp-review-tab-'+e+'"><a href="#" data-review-id="'+e+'">'+a+" "+e+"</a></li>"),n(e),i(e),s.fadeOut("fast"),p(e)}).fail(function(){s.fadeOut("fast"),alert("Error getting review form. Retry or contact the plugin support team. Thank You.")})}),$("#rwp-reviews-meta-box").on("click",".rwp-add-custom-link-btn",function(t){t.preventDefault();var e=$(this).data("review-id"),a=0,r=$(this).parent().find("li").last().data("id");null!=r&&(a=parseInt(r)+1);var n=$(this).parent().find(".rwp-custom-links"),i='<li data-id="'+a+'">';i+='<input type="text" name="rwp_reviews[0][review_custom_links]['+a+'][label]"	value="" placeholder="'+n.data("label-placeholder")+'">',i+='<input type="text" name="rwp_reviews[0][review_custom_links]['+a+'][url]" 	value="" placeholder="'+n.data("url-placeholder")+'">',i+='<a href="#" class="rwp-delete-custom-link-btn">'+n.data("remove-placeholder")+"</a>",i+="</li>",n.append(i)}),$("#rwp-reviews-meta-box").on("click",".rwp-delete-custom-link-btn",function(t){t.preventDefault(),$(this).parent().remove()}),$("#rwp-reviews-meta-box").on("keyup",".rwp-review-title-input",function(t){t.preventDefault();var e=$(this).data("review-id"),a=$(this).data("default"),r=$(this).val(),n=""==r?a:r;$("#rwp-review-tab-"+e+" a").html(n)}),$("#rwp-tables-meta-box").on("change",".rwp-template-selection",function(){var t=$(this).data("table-id"),e=$(this).val();$(".rwp-t-reviews-"+t).hide(),$("#rwp-template-reviews-"+t+"-"+e).show()}),$("#rwp-tables-meta-box").on("click",".rwp-tabs-wrap li a",function(t){t.preventDefault();var e=$(this).data("table-id");o(e)}),$("#rwp-tables-meta-box").on("click",".rwp-delete-table-btn",function(t){t.preventDefault();var e=$(this).data("table-id");$("#rwp-table-"+e).remove(),$("#rwp-table-tab-"+e).remove();var a=$(".rwp-table-form").last().data("table-id");o(a)}),$("#rwp-add-table-form-btn").click(function(t){t.preventDefault();var e=0,a=$("#rwp-tables-meta-box .rwp-tabs-wrap").data("placehoder"),r=$(".rwp-table-form").last().data("table-id"),n=$(this).parent().find(".rwp-loader");null!=r&&(e=parseInt(r)+1);var i={action:tablesMetaBoxObj.action,security:tablesMetaBoxObj.ajax_nonce,rwp_table_id:e};n.fadeIn("fast"),$.post(tablesMetaBoxObj.ajax_url,i,function(t){$("#rwp-tables-wrap").append(t),$("#rwp-tables-meta-box .rwp-tabs-wrap").append('<li class="rwp-tabs" id="rwp-table-tab-'+e+'"><a href="#" data-table-id="'+e+'">'+a+"</a></li>"),s(e),o(e),n.fadeOut("fast")}).fail(function(){n.fadeOut("fast"),alert("Error getting table form. Retry or contact the plugin support team. Thank You.")})}),$("#rwp-tables-meta-box").on("keyup",".rwp-table-title-input",function(t){t.preventDefault();var e=$(this).data("table-id"),a=$(this).data("default"),r=$(this).val(),n=""==r?a:r;$("#rwp-table-tab-"+e+" a").html(n)}),$(".rwp-theme-name").tooltip({track:!0,tooltipClass:"rwp-tooltip",content:function(){return'<img src="'+$(this).data("preview")+'" height="400px" />'}}),$("#rwp-rating-image-btn-default").click(function(t){t.preventDefault();var e=$(this).data("default");$("#rwp-rating-image-url").val(e),$("#rwp-rating-image").attr("src",e)}),$(".themes").on("click",".rwp-delete-template-btn",function(t){t.preventDefault();var e=$(this).data("template-id"),a=$(this).data("confirm-msg"),r=confirm(a);if(1!=r)return!1;var n=$(".wrap").find(".rwp-loader"),i={action:deleteTemplateObj.action,security:deleteTemplateObj.ajax_nonce,templateId:e};n.fadeIn("fast"),$.post(deleteTemplateObj.ajax_url,i,function(t){$("#rwp-theme-wrap-"+e).fadeOut("fast",function(){$(this).remove()}),n.fadeOut("fast")},"json").fail(function(){n.fadeOut("fast"),alert("Error deleting template. Retry or contact the plugin support team. Thank You.")})}),$(".themes").on("click",".rwp-duplicate-template-btn",function(t){t.preventDefault();var e=$(this).data("template-id"),a=$(".wrap").find(".rwp-loader"),r={action:duplicateTemplateObj.action,security:duplicateTemplateObj.ajax_nonce,templateId:e};a.fadeIn("fast"),$.post(duplicateTemplateObj.ajax_url,r,function(t){if("undefined"!=typeof t.html){var e=$(".theme.add-new-theme"),r=$(".themes");e.remove(),r.append(t.html).append(e)}a.fadeOut("fast")},"json").fail(function(){a.fadeOut("fast"),alert("Error duplicating template. Retry or contact the plugin support team. Thank You.")})}),$("#rwp-restore-data-btn").click(function(t){t.preventDefault();var e=$(this).data("confirm-msg"),a=confirm(e);if(1!=a)return!1;var r=$(this).parent().find(".rwp-loader"),n={action:restoreDataObj.action,security:restoreDataObj.ajax_nonce};r.fadeIn("fast"),$.post(restoreDataObj.ajax_url,n,function(t){$("#rwp-restore-data-notification p strong").html(t.msg),$("#rwp-restore-data-notification").slideDown("fats"),r.fadeOut("fast")},"json").fail(function(){r.fadeOut("fast"),alert("Error restoring data. Retry or contact the plugin support team. Thank You.")})}),$(".rwp-reset-score-btn").click(function(t){t.preventDefault();var e=$(this).data("confirm-msg"),a=$(this).data("res-msg"),r=$(this).data("review-id"),n=$(this).data("post-id"),i=confirm(e),p=$(this);if(1!=i)return!1;var s=$(this).parent().find(".rwp-loader"),o={action:resetScoreObj.action,security:resetScoreObj.ajax_nonce,reviewId:r,postId:n};s.fadeIn("fast"),$.post(resetScoreObj.ajax_url,o,function(t){p.parent().parent().find(".rwp_reviews_table_review_users_score").html(a),s.fadeOut("fast")}).fail(function(){s.fadeOut("fast"),alert("Error resetting score. Retry or contact the plugin support team. Thank You.")})}),$(".rwp-delete-single-review-btn").click(function(t){t.preventDefault();var e=$(this).data("confirm-msg"),a=$(this).data("res-msg"),r=$(this).data("review-id"),n=$(this).data("post-id"),i=confirm(e),p=$(this);if(1!=i)return!1;var s=$(this).parent().find(".rwp-loader"),o={action:deleteReviewObj.action,security:deleteReviewObj.ajax_nonce,reviewId:r,postId:n};s.fadeIn("fast"),$.post(deleteReviewObj.ajax_url,o,function(t){switch(s.fadeOut("fast"),t.code){case 400:s.fadeOut("fast"),alert(t.data.msg);break;case 200:p.parent().parent().remove(),alert(a);break;default:alert("Error in deleting process!")}},"json").fail(function(t){s.fadeOut("fast"),alert("Error deleting review. Retry or contact the plugin support team. Thank You.")})}),"undefined"!=typeof rwpRlForm){var f=jQuery(rwpRlForm),u=f.find("table");f.appendTo("body").hide(),f.find("#rwp-rl-gen-btn").click(function(t){t.preventDefault();var e=$("#rwp-rl-form").serializeArray(),a="[rwp-reviews-list",r=[];jQuery.each(e,function(t,e){switch(e.name){case"rwp_rl[title]":var n=$.trim(e.value);""!=n&&(a+=' title="'+n+'"');break;case"rwp_rl[template]":""!=e.value&&r.push(e.value);break;case"rwp_rl[sorting]":"top_score_users_score"!=e.value&&(a+=' sorting="'+e.value+'"');break;case"rwp_rl[count]":var i=$.trim(e.value);""!=i&&5!=i&&(a+=' count="'+i+'"');break;case"rwp_rl[layout]":"auto"!=e.value&&(a+=' layout="'+e.value+'"')}}),r.length>0&&(a+=' template="'+r.join(":")+'"');var n=$("#rwp-rl-form").find('input[name="rwp_rl[stars]"]');n.is(":checked")&&(a+=' stars="yes"'),a+="]",tinyMCE.activeEditor.insertContent(a),tb_remove()})}$("#rwp-io_action").change(function(){var t=$(this).val(),e=$(this).data("fname"),a=$("#rwp_io_submit"),r=a.data("export"),n=a.data("import"),i='<tr id="rwp-io-file-input">';i+='<th scope="row">File</th>',i+="<td>",i+='<input type="file" name="'+e+'" value="" />',i+="</td>",i+="</tr>","rwp_export"==t?(a.val(r),$("#rwp-io-file-input").remove()):(a.val(n),$(this).parent().parent().parent().append(i))}),$(".api h4").click(function(t){t.preventDefault();var e=$(this).parent().find(".api-content");e.toggle()}),$(".reviewer_page_reviewer-users-ratings-page").on("click",".rwp-rmi-cancel",function(t){var e=$(this).data("rating-id");$("#rwp-tr-r-"+e).fadeOut("fast",function(){$(this).remove()}),$("#rwp-tr-r-a-"+e).fadeIn("fast")}),$("#rwp-ratings-mega-wrap").on("click",".rwp-ratings-action",function(t){t.preventDefault();var e=$(this).data("action"),a=$(this).data("meta-id"),r=$(this).data("rating-id"),n=$(this).data("counterpart"),i={},p=$(this).parent().parent().parent().parent().find(".rwp-loader");if("delete"==e){var s=$(this).data("confirm-msg"),o=confirm(s);if(1!=o)return!1}if("edit-done"==e){var d=$(this).parent(),c=d.find('input[name="rwp-rmi[rating_user_name]"]').val();c="undefined"==typeof c?"":c;var f=d.find('input[name="rwp-rmi[rating_user_email]"]').val();f="undefined"==typeof f?"":f,i.rating_user_name=c,i.rating_user_email=f,i.rating_title=d.find('input[name="rwp-rmi[rating_title]"]').val(),i.rating_comment=d.find('textarea[name="rwp-rmi[rating_comment]"]').val(),i.rating_date=d.find('input[name="rwp-rmi[rating_date]"]').val(),i.rating_score=[],d.find(".rwp-scores-sliders input[type=text]").each(function(t){i.rating_score[$(this).data("index")]=$(this).val()}),p=$(this).parent().find(".rwp-loader")}var u=$(this).parent().parent().parent().parent().find(".rwp-marker"),w={action:ratingsManagerActionsObj.action,security:ratingsManagerActionsObj.ajax_nonce,metaId:a,ratingId:r,ac:e,pending:$(this).data("pending"),newRating:i},m=$(this);p.fadeIn("fast"),$.post(ratingsManagerActionsObj.ajax_url,w,function(t){switch(t.code){case 400:p.fadeOut("fast"),alert(t.data.msg);break;case 200:if(p.fadeOut("fast"),"approve"==e)return u.addClass("rwp-hidden"),m.data("action","unapprove"),m.data("counterpart",m.html()),m.html(n),m.parent().removeClass("rwp_approve").addClass("rwp_unapprove"),m.parent().parent().find(".delete a").data("pending","no"),m.parent().parent().parent().parent().find('input[name="rwp_bulk_action[]"]').attr("data-pending","no"),void m.parent().parent().parent().parent().find('input[name="rwp_bulk_action[]"]').data("pending","no");if("unapprove"==e)return u.removeClass("rwp-hidden"),m.data("action","approve"),m.data("counterpart",m.html()),m.html(n),m.parent().removeClass("rwp_unapprove").addClass("rwp_approve"),m.parent().parent().find(".delete a").data("pending","yes"),m.parent().parent().parent().parent().find('input[name="rwp_bulk_action[]"]').attr("data-pending","yes"),void m.parent().parent().parent().parent().find('input[name="rwp_bulk_action[]"]').data("pending","yes");if("delete"==e)return void m.parent().parent().parent().parent().remove();if("edit"==e){var a=m.parent().parent().parent().parent(),i=t.data.rating,s=t.data.form;a.attr("id","rwp-tr-r-a-"+r),a.hide(),$(s).insertBefore(a).fadeIn("fast"),l("#rwp-tr-r-"+r)}if("edit-done"==e){var a=$("#rwp-tr-r-a-"+r),i=t.data.rating;i.rating_user_id<1&&(a.find(".rwp-rt-user-name").html(i.rating_user_name),a.find(".rwp_rt_author a").html(i.rating_user_email)),a.find(".rwp_rt_comment .rwp-the-comment").html(i.rating_title),a.find(".rwp_rt_comment p").html(i.rating_comment),a.find(".rwp_rt_comment em").html("Submitted on "+i.rating_date),a.find(".rwp_rt_score").find("p").remove(),a.find(".rwp_rt_score").append('<p class="description">Refresh the page to see the scores update</p>'),$("#rwp-tr-r-"+r).fadeOut("fast",function(){$(this).remove()}),a.fadeIn("fast")}}},"json").fail(function(t){p.fadeOut("fast"),alert("Error during action!")})}),$("#rwp-ratings-mega-wrap #doaction, #rwp-ratings-mega-wrap #doaction2").click(function(t){t.preventDefault();var e=$(this).parent().parent().parent(),a=[],r=e.find('input[name="rwp_bulk_action[]"]:checked'),n=$(this).parent().find("select").val();if(0!=r.length&&-1!=n){if(r.each(function(t){var e={};e.metaId=$(this).data("meta-id"),e.ratingId=$(this).data("rating-id"),e.pending=$(this).data("pending"),a.push(e)}),"delete"==n){var i="Confirm the action?",p=confirm(i);if(1!=p)return!1}var s={action:ratingsManagerActionsBulkObj.action,security:ratingsManagerActionsBulkObj.ajax_nonce,rows:a,ac:n},o=$("#rwp-ratings-mega-wrap .rwp-loader").first().attr("src");$("#rwp-ratings-mega-wrap .bulkactions img").remove(),$("#rwp-ratings-mega-wrap .bulkactions").append('<img style="margin-top:6px; display:none;" src="'+o+'" alt="" />');var l=$("#rwp-ratings-mega-wrap .bulkactions img");l.fadeIn("fast"),$.post(ratingsManagerActionsBulkObj.ajax_url,s,function(t){switch(t.code){case 400:l.fadeOut("fast"),alert(t.data.msg);break;case 200:l.fadeOut("fast"),location.reload()}},"json").fail(function(t){l.fadeOut("fast"),alert("Error during bulk action!")})}})});
//# sourceMappingURL=./reviewer.admin.min.js.map